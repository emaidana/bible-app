<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic Explorer - Berean</title>
    <meta name="description" content="Explore what the Bible says about Anxiety, Focus, Relationships, Purpose, and more.">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="product-page">
    <!-- Navigation -->
    <nav class="navigation-bar nav-light">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">berean</a>
            <div class="nav-links">
                <a href="daily.html">Daily</a>
                <a href="weekly.html">Weekly</a>
                <a href="search.html">Search</a>
                <a href="topics.html" class="active">Topics</a>
                <a href="founders.html">Founders</a>
            </div>
            <div class="nav-actions">
                <button class="nav-cta" id="shareBtn">Share</button>
            </div>
            <button class="nav-hamburger" id="navHamburger" aria-label="Open menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobileMenu">
        <a href="daily.html">Daily Verse</a>
        <a href="weekly.html">Weekly Study</a>
        <a href="search.html">Verse Search</a>
        <a href="topics.html" class="active">Topics</a>
        <a href="founders.html">For Founders</a>
    </div>

    <!-- Product Header -->
    <header class="product-header topics-header">
        <div class="container">
            <div class="product-header-content">
                <div class="product-header-badge">üß≠ Topic Explorer</div>
                <h1>Explore What God Says About...</h1>
                <p>Never read the Bible? Start here. Choose a topic that matters to you, and discover relevant verses one at a time.</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="product-main">
        <div class="container">
            <!-- Interest Survey (shown on first visit) -->
            <div class="interest-survey" id="interestSurvey">
                <div class="survey-header">
                    <h2>What are you most interested in exploring?</h2>
                    <p>Select up to 3 topics. We'll personalize your experience.</p>
                </div>
                <div class="survey-topics">
                    <label class="survey-topic">
                        <input type="checkbox" value="anxiety">
                        <span class="topic-icon">üò∞</span>
                        <span class="topic-name">Stress & Anxiety</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="focus">
                        <span class="topic-icon">üéØ</span>
                        <span class="topic-name">Focus & Productivity</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="relationships">
                        <span class="topic-icon">‚ù§Ô∏è</span>
                        <span class="topic-name">Relationships</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="sleep">
                        <span class="topic-icon">üò¥</span>
                        <span class="topic-name">Sleep & Rest</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="purpose">
                        <span class="topic-icon">üåü</span>
                        <span class="topic-name">Purpose & Meaning</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="leadership">
                        <span class="topic-icon">üëë</span>
                        <span class="topic-name">Leadership</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="money">
                        <span class="topic-icon">üí∞</span>
                        <span class="topic-name">Money & Provision</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="fear">
                        <span class="topic-icon">üò®</span>
                        <span class="topic-name">Fear & Courage</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="forgiveness">
                        <span class="topic-icon">üïäÔ∏è</span>
                        <span class="topic-name">Forgiveness</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="identity">
                        <span class="topic-icon">ü™û</span>
                        <span class="topic-name">Identity & Self-Worth</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="wisdom">
                        <span class="topic-icon">üìö</span>
                        <span class="topic-name">Wisdom & Decision Making</span>
                    </label>
                    <label class="survey-topic">
                        <input type="checkbox" value="gratitude">
                        <span class="topic-icon">üôè</span>
                        <span class="topic-name">Gratitude & Joy</span>
                    </label>
                </div>
                <button class="btn btn-primary btn-large" id="startExploring">
                    Start Exploring
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>

            <!-- Topics Grid (shown after survey) -->
            <div class="topics-content" id="topicsContent" style="display: none;">
                <div class="your-topics">
                    <h3>Your Topics</h3>
                    <div class="selected-topics" id="selectedTopics"></div>
                    <button class="btn-link" id="changeTopics">Change topics</button>
                </div>

                <div class="topics-grid" id="topicsGrid"></div>
            </div>

            <!-- Topic Detail View -->
            <div class="topic-detail" id="topicDetail" style="display: none;">
                <button class="back-btn" id="backToTopics">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back to Topics
                </button>

                <div class="topic-header" id="topicHeader">
                    <span class="topic-detail-icon" id="topicDetailIcon"></span>
                    <div class="topic-detail-info">
                        <h2 id="topicDetailTitle"></h2>
                        <p id="topicDetailDescription"></p>
                    </div>
                </div>

                <div class="verse-navigator">
                    <span class="verse-position" id="versePosition">Verse 1 of 12</span>
                </div>

                <article class="verse-card-large topic-verse-card">
                    <div class="verse-reference" id="topicVerseRef"></div>
                    <blockquote class="verse-text-large" id="topicVerseText"></blockquote>
                </article>

                <!-- Quick Analysis -->
                <div class="quick-analysis">
                    <div class="quick-insight">
                        <h4>Key Insight</h4>
                        <p id="topicInsight"></p>
                    </div>
                    <div class="quick-action">
                        <h4>Try This Today</h4>
                        <p id="topicAction"></p>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="verse-navigation">
                    <button class="nav-prev" id="prevVerse" disabled>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Previous
                    </button>
                    <button class="nav-next" id="nextVerse">
                        Next
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>

                <!-- Share -->
                <div class="share-cta compact">
                    <div class="share-buttons">
                        <button class="share-btn share-whatsapp" id="shareWhatsApp">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                            </svg>
                            Share
                        </button>
                        <button class="share-btn share-email" id="shareEmail">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            Email
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="product-footer">
        <div class="container">
            <a href="index.html" class="footer-logo">berean</a>
            <p>Live a Superpowered Life</p>
        </div>
    </footer>

    <script src="js/verses.js"></script>
    <script src="js/storage.js"></script>
    <script>
        // Topic data
        const topicsData = {
            anxiety: {
                name: 'Stress & Anxiety',
                icon: 'üò∞',
                description: 'What God says about peace, worry, and trusting Him',
                verses: [
                    { ref: 'Philippians 4:6-7', text: 'Be anxious for nothing, but in everything by prayer and supplication, with thanksgiving, let your requests be made known to God; and the peace of God, which surpasses all understanding, will guard your hearts and minds through Christ Jesus.', insight: 'Anxiety often comes from trying to control what we cannot. This verse redirects that energy into prayer.', action: 'Write down 3 things causing you anxiety. For each, say "I release control of this to God." Notice how your body feels after.' },
                    { ref: 'Matthew 6:25-27', text: 'Therefore I tell you, do not worry about your life, what you will eat or drink; or about your body, what you will wear. Is not life more than food, and the body more than clothes? Look at the birds of the air; they do not sow or reap or store away in barns, and yet your heavenly Father feeds them. Are you not much more valuable than they?', insight: 'Jesus points to nature as evidence of God\'s provision. Worry assumes God won\'t provide.', action: 'Spend 5 minutes outside observing nature. Notice how creation functions without anxiety.' },
                    { ref: 'Psalm 55:22', text: 'Cast your cares on the LORD and he will sustain you; he will never let the righteous be shaken.', insight: 'The Hebrew word for "cast" implies throwing with force‚Äîan active release, not passive hope.', action: 'Physically write your worry on paper, then crumple it and throw it away as an act of release.' }
                ]
            },
            focus: {
                name: 'Focus & Productivity',
                icon: 'üéØ',
                description: 'Biblical wisdom on attention, priorities, and meaningful work',
                verses: [
                    { ref: 'Colossians 3:23', text: 'Whatever you do, work at it with all your heart, as working for the Lord, not for human masters.', insight: 'Reframing work as service to God elevates mundane tasks and increases intrinsic motivation.', action: 'Before your next task, pause and say: "I do this as service to God." Notice how it changes your approach.' },
                    { ref: 'Proverbs 4:25-27', text: 'Let your eyes look straight ahead; fix your gaze directly before you. Give careful thought to the paths for your feet and be steadfast in all your ways.', insight: 'Focus is a physical discipline. Where your eyes go, your attention follows.', action: 'For 1 hour, remove all visible distractions. Put your phone in another room. Work with eyes "straight ahead."' },
                    { ref: 'Ecclesiastes 9:10', text: 'Whatever your hand finds to do, do it with all your might.', insight: 'Half-effort produces half-results. Full engagement in the present task is the path to excellence.', action: 'Choose your most important task. Set a timer for 45 minutes. Give it your complete, undivided attention.' }
                ]
            },
            relationships: {
                name: 'Relationships',
                icon: '‚ù§Ô∏è',
                description: 'God\'s design for connection, love, and healthy boundaries',
                verses: [
                    { ref: '1 Corinthians 13:4-7', text: 'Love is patient, love is kind. It does not envy, it does not boast, it is not proud. It does not dishonor others, it is not self-seeking, it is not easily angered, it keeps no record of wrongs.', insight: 'This isn\'t romantic poetry‚Äîit\'s a behavioral checklist. Love is defined by actions, not feelings.', action: 'Choose one person. Practice one of these behaviors intentionally with them today: patience, kindness, or not keeping record of wrongs.' },
                    { ref: 'Proverbs 27:17', text: 'As iron sharpens iron, so one person sharpens another.', insight: 'Growth requires friction. The right relationships challenge us, not just comfort us.', action: 'Identify one relationship that challenges you to grow. Reach out to that person this week.' },
                    { ref: 'Romans 12:18', text: 'If it is possible, as far as it depends on you, live at peace with everyone.', insight: 'Notice the qualifiers: "if possible" and "as far as it depends on you." Peace has limits, but you control your part.', action: 'Is there a relationship with unresolved tension? Take one step today toward peace‚Äîyour part only.' }
                ]
            },
            purpose: {
                name: 'Purpose & Meaning',
                icon: 'üåü',
                description: 'Discovering why you\'re here and what you\'re made for',
                verses: [
                    { ref: 'Jeremiah 29:11', text: 'For I know the plans I have for you, declares the LORD, plans to prosper you and not to harm you, plans to give you hope and a future.', insight: 'This was written to exiles in Babylon‚Äîpeople who felt lost. Purpose often emerges from displacement.', action: 'Write down a time when difficulty led to unexpected direction. What might God be doing now through your challenges?' },
                    { ref: 'Ephesians 2:10', text: 'For we are God\'s handiwork, created in Christ Jesus to do good works, which God prepared in advance for us to do.', insight: 'You are a masterpiece (handiwork) with a mission (good works). Identity and purpose are connected.', action: 'What good work seems to consistently find you? What do people ask for your help with? That\'s a clue.' },
                    { ref: 'Proverbs 16:9', text: 'In their hearts humans plan their course, but the LORD establishes their steps.', insight: 'Planning and trusting aren\'t opposites. Plan your direction; trust God with the path.', action: 'Make a plan for something you\'ve been avoiding. Then pray: "Establish my steps."' }
                ]
            },
            leadership: {
                name: 'Leadership',
                icon: 'üëë',
                description: 'Biblical principles for influence, service, and leading well',
                verses: [
                    { ref: 'Mark 10:43-45', text: 'Whoever wants to become great among you must be your servant, and whoever wants to be first must be slave of all. For even the Son of Man did not come to be served, but to serve.', insight: 'Jesus inverted the power hierarchy. True leadership is measured by service, not status.', action: 'This week, find one opportunity to serve someone you lead. Do something below your "level."' },
                    { ref: 'Proverbs 11:14', text: 'For lack of guidance a nation falls, but victory is won through many advisers.', insight: 'Wisdom rarely comes alone. The best leaders build councils, not kingdoms.', action: 'Identify a decision you\'re facing. Ask 2-3 trusted people for input before deciding.' },
                    { ref: 'Exodus 18:21', text: 'Select capable men from all the people‚Äîmen who fear God, trustworthy men who hate dishonest gain‚Äîand appoint them as officials.', insight: 'Jethro\'s criteria: capability + character + integrity. Skill alone isn\'t enough.', action: 'Evaluate your team by these criteria. Where do you need to develop people or make changes?' }
                ]
            },
            money: {
                name: 'Money & Provision',
                icon: 'üí∞',
                description: 'What Scripture teaches about wealth, generosity, and trust',
                verses: [
                    { ref: 'Matthew 6:21', text: 'For where your treasure is, there your heart will be also.', insight: 'Jesus doesn\'t say your heart follows your treasure‚ÄîHe says it goes there. Money reveals and shapes values.', action: 'Review last month\'s spending. What does it reveal about where your heart actually is?' },
                    { ref: 'Proverbs 21:5', text: 'The plans of the diligent lead to profit as surely as haste leads to poverty.', insight: 'Wealth typically comes from consistent, planned effort‚Äînot quick wins or luck.', action: 'Do you have a financial plan? If not, block 1 hour this week to create a basic budget.' },
                    { ref: 'Philippians 4:11-12', text: 'I have learned to be content whatever the circumstances. I know what it is to be in need, and I know what it is to have plenty.', insight: 'Contentment is learned, not found. Paul had to practice it in both poverty and plenty.', action: 'Name three things you have that you\'re grateful for. Contentment starts with recognition.' }
                ]
            }
        };

        let selectedTopics = [];
        let currentTopic = null;
        let currentVerseIndex = 0;

        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            checkSurveyStatus();
        });

        function setupEventListeners() {
            // Mobile menu
            document.getElementById('navHamburger').addEventListener('click', () => {
                document.getElementById('mobileMenu').classList.toggle('active');
            });

            // Survey topic selection (max 3)
            document.querySelectorAll('.survey-topic input').forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const checked = document.querySelectorAll('.survey-topic input:checked');
                    if (checked.length > 3) {
                        checkbox.checked = false;
                        alert('Please select up to 3 topics');
                    }
                });
            });

            // Start exploring
            document.getElementById('startExploring').addEventListener('click', () => {
                const checked = document.querySelectorAll('.survey-topic input:checked');
                if (checked.length === 0) {
                    alert('Please select at least one topic');
                    return;
                }
                selectedTopics = Array.from(checked).map(c => c.value);
                localStorage.setItem('berean_topics', JSON.stringify(selectedTopics));
                showTopicsContent();
            });

            // Change topics
            document.getElementById('changeTopics').addEventListener('click', () => {
                document.getElementById('topicsContent').style.display = 'none';
                document.getElementById('interestSurvey').style.display = 'block';
            });

            // Back to topics
            document.getElementById('backToTopics').addEventListener('click', () => {
                document.getElementById('topicDetail').style.display = 'none';
                document.getElementById('topicsContent').style.display = 'block';
            });

            // Verse navigation
            document.getElementById('prevVerse').addEventListener('click', () => {
                if (currentVerseIndex > 0) {
                    currentVerseIndex--;
                    renderCurrentVerse();
                }
            });

            document.getElementById('nextVerse').addEventListener('click', () => {
                const topic = topicsData[currentTopic];
                if (currentVerseIndex < topic.verses.length - 1) {
                    currentVerseIndex++;
                    renderCurrentVerse();
                }
            });

            // Share
            document.getElementById('shareWhatsApp').addEventListener('click', shareToWhatsApp);
            document.getElementById('shareEmail').addEventListener('click', shareToEmail);
        }

        function checkSurveyStatus() {
            const saved = localStorage.getItem('berean_topics');
            if (saved) {
                selectedTopics = JSON.parse(saved);
                showTopicsContent();
            }
        }

        function showTopicsContent() {
            document.getElementById('interestSurvey').style.display = 'none';
            document.getElementById('topicsContent').style.display = 'block';

            // Show selected topics
            const container = document.getElementById('selectedTopics');
            container.innerHTML = selectedTopics.map(t => {
                const topic = topicsData[t];
                return `<span class="selected-topic-badge">${topic.icon} ${topic.name}</span>`;
            }).join('');

            // Render topics grid
            renderTopicsGrid();
        }

        function renderTopicsGrid() {
            const grid = document.getElementById('topicsGrid');
            grid.innerHTML = selectedTopics.map(key => {
                const topic = topicsData[key];
                return `
                    <div class="topic-card" data-topic="${key}">
                        <span class="topic-card-icon">${topic.icon}</span>
                        <h3 class="topic-card-title">${topic.name}</h3>
                        <p class="topic-card-desc">${topic.description}</p>
                        <span class="topic-card-count">${topic.verses.length} verses</span>
                    </div>
                `;
            }).join('');

            // Add all topics section
            grid.innerHTML += `<div class="all-topics-section">
                <h4>All Topics</h4>
                <div class="all-topics-grid">
                    ${Object.entries(topicsData).filter(([k]) => !selectedTopics.includes(k)).map(([key, topic]) => `
                        <div class="topic-card small" data-topic="${key}">
                            <span class="topic-card-icon">${topic.icon}</span>
                            <span class="topic-card-title">${topic.name}</span>
                        </div>
                    `).join('')}
                </div>
            </div>`;

            // Add click handlers
            grid.querySelectorAll('.topic-card').forEach(card => {
                card.addEventListener('click', () => {
                    currentTopic = card.dataset.topic;
                    currentVerseIndex = 0;
                    showTopicDetail();
                });
            });
        }

        function showTopicDetail() {
            document.getElementById('topicsContent').style.display = 'none';
            document.getElementById('topicDetail').style.display = 'block';

            const topic = topicsData[currentTopic];
            document.getElementById('topicDetailIcon').textContent = topic.icon;
            document.getElementById('topicDetailTitle').textContent = topic.name;
            document.getElementById('topicDetailDescription').textContent = topic.description;

            renderCurrentVerse();
        }

        function renderCurrentVerse() {
            const topic = topicsData[currentTopic];
            const verse = topic.verses[currentVerseIndex];

            document.getElementById('versePosition').textContent =
                `Verse ${currentVerseIndex + 1} of ${topic.verses.length}`;
            document.getElementById('topicVerseRef').textContent = verse.ref;
            document.getElementById('topicVerseText').textContent = verse.text;
            document.getElementById('topicInsight').textContent = verse.insight;
            document.getElementById('topicAction').textContent = verse.action;

            // Update nav buttons
            document.getElementById('prevVerse').disabled = currentVerseIndex === 0;
            document.getElementById('nextVerse').disabled = currentVerseIndex === topic.verses.length - 1;
        }

        function shareToWhatsApp() {
            const topic = topicsData[currentTopic];
            const verse = topic.verses[currentVerseIndex];
            const msg = `*${verse.ref}*\n\n"${verse.text}"\n\nüí° *Insight:* ${verse.insight}\n\n‚Äî via Berean Topics | berean.app`;
            window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function shareToEmail() {
            const topic = topicsData[currentTopic];
            const verse = topic.verses[currentVerseIndex];
            const subject = `What God says about ${topic.name}: ${verse.ref}`;
            const body = `${verse.ref}\n\n"${verse.text}"\n\nInsight: ${verse.insight}\n\nAction: ${verse.action}\n\n‚Äî via Berean | berean.app`;
            window.open(`mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        }
    </script>
</body>
</html>

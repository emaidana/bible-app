<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selah - Pause. Reflect. Practice.</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-brand">
                <h1 class="app-title" data-i18n="appTitle">Selah</h1>
                <span class="app-tagline" data-i18n="appTagline">Pause. Reflect. Practice.</span>
            </div>
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <span class="theme-icon" data-theme="light">‚òÄÔ∏è</span>
                    <span class="theme-icon" data-theme="dark">üåô</span>
                </button>
                <button class="history-btn" id="historyBtn" aria-label="View history">
                    <span class="history-icon">üìñ</span>
                    <span data-i18n="historyBtn">History</span>
                </button>
                <button class="language-toggle" id="languageToggle" aria-label="Toggle language">
                    <span class="lang-flag" data-lang="en">üá∫üá∏</span>
                    <span class="lang-label" data-lang="en">English</span>
                    <span class="lang-switch">‚áÑ</span>
                    <span class="lang-flag" data-lang="es">üá¶üá∑</span>
                    <span class="lang-label" data-lang="es">Espa√±ol</span>
                </button>
            </div>
        </header>

        <!-- Search Section -->
        <section class="search-section">
            <div class="search-container">
                <input
                    type="text"
                    id="searchInput"
                    class="search-input"
                    placeholder="Search verse (e.g., John 3:16, Salmos 23)"
                    data-i18n-placeholder="searchPlaceholder"
                    autocomplete="off"
                >
                <button class="search-btn" id="searchBtn" aria-label="Search">
                    <span>üîç</span>
                </button>
            </div>
            <div class="search-suggestions" id="searchSuggestions"></div>
            <p class="search-hint" data-i18n="searchHint">Available verses will appear as you type</p>
        </section>

        <main class="main-content">
            <!-- Daily Verse Card (Hero) -->
            <article class="verse-card">
                <div class="verse-card-header">
                    <div class="daily-badge" id="dailyBadge">
                        <span data-i18n="todaysVerse">Today's Verse</span>
                    </div>
                    <div class="verse-actions">
                        <div class="streak-badge" id="streakBadge">
                            <span class="streak-flame">üî•</span>
                            <span class="streak-count" id="streakCount">1</span>
                        </div>
                        <button class="share-btn" id="shareBtn" aria-label="Share to WhatsApp" title="Share to WhatsApp">
                            <span class="share-icon">
                                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                                </svg>
                            </span>
                        </button>
                        <button class="bookmark-btn" id="bookmarkBtn" aria-label="Bookmark">
                            <span class="bookmark-icon">‚ô°</span>
                        </button>
                    </div>
                </div>
                <div class="verse-reference">
                    <span id="verseBook"></span> <span id="verseChapter"></span>:<span id="verseNumber"></span>
                </div>
                <blockquote class="verse-text" id="verseText"></blockquote>
                <button class="back-to-daily" id="backToDaily" style="display: none;" data-i18n="backToDaily">
                    ‚Üê Back to Today's Verse
                </button>
            </article>

            <!-- Expandable Context Sections -->
            <section class="context-sections">
                <details class="context-section" data-section="historical">
                    <summary class="context-header">
                        <span class="context-icon">üìú</span>
                        <span class="context-title" data-i18n="historicalTitle">Historical Context</span>
                        <span class="confidence-badge" id="historicalConfidence"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="historicalContent"></p>
                        <div class="card-sources" id="historicalSources"></div>
                        <p class="card-disclaimer" id="historicalDisclaimer"></p>
                    </div>
                </details>

                <details class="context-section" data-section="economic">
                    <summary class="context-header">
                        <span class="context-icon">üí∞</span>
                        <span class="context-title" data-i18n="economicTitle">Economic Context</span>
                        <span class="confidence-badge" id="economicConfidence"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="economicContent"></p>
                        <div class="card-sources" id="economicSources"></div>
                        <p class="card-disclaimer" id="economicDisclaimer"></p>
                    </div>
                </details>

                <details class="context-section" data-section="social">
                    <summary class="context-header">
                        <span class="context-icon">üë•</span>
                        <span class="context-title" data-i18n="socialTitle">Social Context</span>
                        <span class="confidence-badge" id="socialConfidence"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="socialContent"></p>
                        <div class="card-sources" id="socialSources"></div>
                        <p class="card-disclaimer" id="socialDisclaimer"></p>
                    </div>
                </details>

                <details class="context-section" data-section="political">
                    <summary class="context-header">
                        <span class="context-icon">‚öñÔ∏è</span>
                        <span class="context-title" data-i18n="politicalTitle">Political Context</span>
                        <span class="confidence-badge" id="politicalConfidence"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="politicalContent"></p>
                        <div class="card-sources" id="politicalSources"></div>
                        <p class="card-disclaimer" id="politicalDisclaimer"></p>
                    </div>
                </details>

                <details class="context-section" data-section="author">
                    <summary class="context-header">
                        <span class="context-icon">‚úçÔ∏è</span>
                        <span class="context-title" data-i18n="authorTitle">Author Background</span>
                        <span class="confidence-badge" id="authorConfidence"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="authorContent"></p>
                        <div class="card-sources" id="authorSources"></div>
                        <p class="card-disclaimer" id="authorDisclaimer"></p>
                    </div>
                </details>
            </section>

            <!-- Science Bridge Section -->
            <section class="science-section">
                <h2 class="section-header" data-i18n="scienceHeader">Science Bridge</h2>

                <details class="context-section science-card" data-section="neuroscience">
                    <summary class="context-header">
                        <span class="context-icon">üß†</span>
                        <span class="context-title" data-i18n="neuroscienceTitle">Neuroscience</span>
                        <span class="confidence-badge" id="neuroscienceConfidence"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="neuroscienceContent"></p>
                        <div class="card-sources" id="neuroscienceSources"></div>
                        <p class="card-disclaimer" id="neuroscienceDisclaimer"></p>
                    </div>
                </details>

                <details class="context-section science-card" data-section="behavioral">
                    <summary class="context-header">
                        <span class="context-icon">üî¨</span>
                        <span class="context-title" data-i18n="behavioralTitle">Behavioral Science</span>
                        <span class="confidence-badge" id="behavioralConfidence"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="behavioralContent"></p>
                        <div class="card-sources" id="behavioralSources"></div>
                        <p class="card-disclaimer" id="behavioralDisclaimer"></p>
                    </div>
                </details>
            </section>

            <!-- Daily Nudge Card -->
            <section class="nudge-section" data-section="nudge">
                <div class="nudge-card">
                    <div class="nudge-header">
                        <span class="nudge-icon">‚ú®</span>
                        <h3 data-i18n="nudgeTitle">Today's Practical Nudge</h3>
                        <span class="confidence-badge" id="nudgeConfidence"></span>
                    </div>
                    <p class="nudge-content" id="nudgeContent"></p>
                    <div class="card-sources" id="nudgeSources"></div>
                    <p class="card-disclaimer" id="nudgeDisclaimer"></p>

                    <!-- Commitment Checkbox -->
                    <div class="commitment-section">
                        <label class="commitment-checkbox">
                            <input type="checkbox" id="dailyCommitment">
                            <span class="checkbox-custom"></span>
                            <span data-i18n="commitmentLabel">I'll try this today</span>
                        </label>
                    </div>
                </div>
            </section>
        </main>

        <footer class="app-footer">
            <div class="depth-indicator" id="depthIndicator">
                <div class="depth-info">
                    <span class="depth-label" id="depthLabel">Seeker</span>
                    <span class="depth-days" id="depthDays">Day 1 of 7</span>
                </div>
                <div class="depth-progress">
                    <div class="depth-fill" id="depthFill" style="width: 0%"></div>
                </div>
            </div>

            <!-- WhatsApp Subscribe Button -->
            <div class="whatsapp-cta">
                <button class="whatsapp-btn" id="whatsappBtn">
                    <span class="whatsapp-icon">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                        </svg>
                    </span>
                    <span data-i18n="whatsappBtn">Get Daily Verses on WhatsApp</span>
                </button>
            </div>

            <p class="footer-text" data-i18n="footerText">A new verse every day to guide your path</p>
        </footer>
    </div>

    <!-- History Modal -->
    <div class="modal-overlay" id="historyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="historyTitle">Previously Viewed Verses</h2>
                <button class="modal-close" id="closeHistory" aria-label="Close">√ó</button>
            </div>
            <div class="modal-body">
                <ul class="history-list" id="historyList"></ul>
                <p class="history-empty" id="historyEmpty" data-i18n="historyEmpty">No verses viewed yet. Check back tomorrow!</p>
            </div>
        </div>
    </div>

    <!-- WhatsApp Subscribe Modal -->
    <div class="modal-overlay" id="whatsappModal">
        <div class="modal-content whatsapp-modal">
            <div class="modal-header whatsapp-modal-header">
                <h2 data-i18n="whatsappModalTitle">Subscribe to Daily Verses</h2>
                <button class="modal-close" id="closeWhatsapp" aria-label="Close">√ó</button>
            </div>
            <div class="modal-body">
                <p class="whatsapp-modal-desc" data-i18n="whatsappModalDesc">
                    Receive a daily Bible verse with context and practical applications directly on WhatsApp.
                </p>

                <form id="subscribeForm" class="subscribe-form">
                    <div class="form-group">
                        <label for="phoneInput" data-i18n="phoneLabel">Phone Number</label>
                        <div class="phone-input-wrapper">
                            <span class="phone-prefix">+</span>
                            <input
                                type="tel"
                                id="phoneInput"
                                class="phone-input"
                                placeholder="1 234 567 8900"
                                data-i18n-placeholder="phonePlaceholder"
                                required
                                autocomplete="tel"
                            >
                        </div>
                        <small class="form-hint" data-i18n="phoneHint">Include country code (e.g., 1 for US)</small>
                    </div>

                    <div class="form-group">
                        <label for="timeSelect" data-i18n="timeLabel">Preferred Time</label>
                        <select id="timeSelect" class="time-select">
                            <option value="05:00">5:00 AM</option>
                            <option value="06:00">6:00 AM</option>
                            <option value="07:00" selected>7:00 AM</option>
                            <option value="08:00">8:00 AM</option>
                            <option value="09:00">9:00 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="12:00">12:00 PM</option>
                            <option value="18:00">6:00 PM</option>
                            <option value="20:00">8:00 PM</option>
                            <option value="21:00">9:00 PM</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="langSelect" data-i18n="langLabel">Language</label>
                        <select id="langSelect" class="lang-select">
                            <option value="en">English</option>
                            <option value="es">Espa√±ol</option>
                        </select>
                    </div>

                    <button type="submit" class="subscribe-submit-btn" id="subscribeSubmit">
                        <span class="btn-text" data-i18n="subscribeBtn">Subscribe</span>
                        <span class="btn-loading" style="display: none;">
                            <span class="spinner"></span>
                        </span>
                    </button>
                </form>

                <div class="subscribe-success" id="subscribeSuccess" style="display: none;">
                    <div class="success-icon">‚úì</div>
                    <h3 data-i18n="subscribeSuccessTitle">You're subscribed!</h3>
                    <p data-i18n="subscribeSuccessMsg">Check your WhatsApp for a confirmation message.</p>
                </div>

                <div class="subscribe-error" id="subscribeError" style="display: none;">
                    <p id="subscribeErrorMsg"></p>
                </div>

                <p class="whatsapp-privacy" data-i18n="whatsappPrivacy">
                    Your number is only used for daily verses. Reply STOP anytime to unsubscribe.
                </p>
            </div>
        </div>
    </div>

    <script src="js/verses.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/app.js"></script>
</body>
</html>

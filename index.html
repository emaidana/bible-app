<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praxis - The Science of Scripture</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-brand">
                <h1 class="app-title" data-i18n="appTitle">Praxis</h1>
                <span class="app-tagline" data-i18n="appTagline">The Science of Scripture</span>
            </div>
            <div class="header-controls">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <span class="theme-icon" data-theme="light">‚òÄÔ∏è</span>
                    <span class="theme-icon" data-theme="dark">üåô</span>
                </button>
                <div class="version-toggle" id="versionToggle" title="Bible Version">
                    <button class="version-btn active" data-version="KJV">KJV</button>
                    <button class="version-btn" data-version="ESV">ESV</button>
                </div>
                <button class="history-btn" id="historyBtn" aria-label="View history">
                    <span class="history-icon">üìñ</span>
                    <span data-i18n="historyBtn">History</span>
                </button>
                <button class="language-toggle" id="languageToggle" aria-label="Toggle language">
                    <span class="lang-flag" data-lang="en">üá∫üá∏</span>
                    <span class="lang-label" data-lang="en">English</span>
                    <span class="lang-switch">‚áÑ</span>
                    <span class="lang-flag" data-lang="es">üá¶üá∑</span>
                    <span class="lang-label" data-lang="es">Espa√±ol</span>
                </button>
            </div>
        </header>

        <!-- Search Section -->
        <section class="search-section">
            <div class="search-container">
                <input
                    type="text"
                    id="searchInput"
                    class="search-input"
                    placeholder="Search verse (e.g., John 3:16, Salmos 23)"
                    data-i18n-placeholder="searchPlaceholder"
                    autocomplete="off"
                >
                <button class="search-btn" id="searchBtn" aria-label="Search">
                    <span>üîç</span>
                </button>
            </div>
            <div class="search-suggestions" id="searchSuggestions"></div>
            <p class="search-hint" data-i18n="searchHint">Available verses will appear as you type</p>
        </section>

        <main class="main-content">
            <!-- Daily Verse Card (Hero) -->
            <article class="verse-card">
                <div class="verse-card-header">
                    <div class="daily-badge" id="dailyBadge">
                        <span data-i18n="todaysVerse">Today's Verse</span>
                    </div>
                    <div class="verse-actions">
                        <div class="streak-badge" id="streakBadge">
                            <span class="streak-flame">üî•</span>
                            <span class="streak-count" id="streakCount">1</span>
                        </div>
                        <button class="share-btn" id="shareBtn" aria-label="Share to WhatsApp" title="Share to WhatsApp">
                            <span class="share-icon">
                                <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                                    <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                                </svg>
                            </span>
                        </button>
                        <button class="bookmark-btn" id="bookmarkBtn" aria-label="Bookmark">
                            <span class="bookmark-icon">‚ô°</span>
                        </button>
                    </div>
                </div>
                <div class="verse-reference">
                    <span id="verseBook"></span> <span id="verseChapter"></span>:<span id="verseNumber"></span>
                </div>
                <blockquote class="verse-text" id="verseText"></blockquote>
                <button class="back-to-daily" id="backToDaily" style="display: none;" data-i18n="backToDaily">
                    ‚Üê Back to Today's Verse
                </button>
            </article>

            <!-- Expandable Context Sections -->
            <section class="context-sections">
                <details class="context-section" data-section="historical">
                    <summary class="context-header">
                        <span class="context-icon">üìú</span>
                        <span class="context-title" data-i18n="historicalTitle">Historical Context</span>
                        <span class="confidence-badge" id="historicalConfidence"></span>
                        <span class="section-status" data-section="historical"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="historicalContent"></p>
                        <div class="card-sources" id="historicalSources"></div>
                        <p class="card-disclaimer" id="historicalDisclaimer"></p>
                        <div class="section-complete">
                            <label class="complete-checkbox">
                                <input type="checkbox" class="section-check" data-section="historical">
                                <span class="checkbox-custom"></span>
                                <span data-i18n="markComplete">I've read this section</span>
                            </label>
                        </div>
                    </div>
                </details>

                <details class="context-section" data-section="economic">
                    <summary class="context-header">
                        <span class="context-icon">üí∞</span>
                        <span class="context-title" data-i18n="economicTitle">Economic Context</span>
                        <span class="confidence-badge" id="economicConfidence"></span>
                        <span class="section-status" data-section="economic"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="economicContent"></p>
                        <div class="card-sources" id="economicSources"></div>
                        <p class="card-disclaimer" id="economicDisclaimer"></p>
                        <div class="section-complete">
                            <label class="complete-checkbox">
                                <input type="checkbox" class="section-check" data-section="economic">
                                <span class="checkbox-custom"></span>
                                <span data-i18n="markComplete">I've read this section</span>
                            </label>
                        </div>
                    </div>
                </details>

                <details class="context-section" data-section="political">
                    <summary class="context-header">
                        <span class="context-icon">üèõÔ∏è</span>
                        <span class="context-title" data-i18n="politicalTitle">Political Context</span>
                        <span class="confidence-badge" id="politicalConfidence"></span>
                        <span class="section-status" data-section="political"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="politicalContent"></p>
                        <div class="card-sources" id="politicalSources"></div>
                        <p class="card-disclaimer" id="politicalDisclaimer"></p>
                        <div class="section-complete">
                            <label class="complete-checkbox">
                                <input type="checkbox" class="section-check" data-section="political">
                                <span class="checkbox-custom"></span>
                                <span data-i18n="markComplete">I've read this section</span>
                            </label>
                        </div>
                    </div>
                </details>

                <details class="context-section" data-section="social">
                    <summary class="context-header">
                        <span class="context-icon">üë•</span>
                        <span class="context-title" data-i18n="socialTitle">Social Context</span>
                        <span class="confidence-badge" id="socialConfidence"></span>
                        <span class="section-status" data-section="social"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="socialContent"></p>
                        <div class="card-sources" id="socialSources"></div>
                        <p class="card-disclaimer" id="socialDisclaimer"></p>
                        <div class="section-complete">
                            <label class="complete-checkbox">
                                <input type="checkbox" class="section-check" data-section="social">
                                <span class="checkbox-custom"></span>
                                <span data-i18n="markComplete">I've read this section</span>
                            </label>
                        </div>
                    </div>
                </details>

                <details class="context-section" data-section="author">
                    <summary class="context-header">
                        <span class="context-icon">‚úçÔ∏è</span>
                        <span class="context-title" data-i18n="authorTitle">About the Author</span>
                        <span class="confidence-badge" id="authorConfidence"></span>
                        <span class="section-status" data-section="author"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="authorContent"></p>
                        <div class="card-sources" id="authorSources"></div>
                        <p class="card-disclaimer" id="authorDisclaimer"></p>
                        <div class="section-complete">
                            <label class="complete-checkbox">
                                <input type="checkbox" class="section-check" data-section="author">
                                <span class="checkbox-custom"></span>
                                <span data-i18n="markComplete">I've read this section</span>
                            </label>
                        </div>
                    </div>
                </details>
            </section>

            <!-- Science Section -->
            <section class="science-section">
                <h2 class="section-header" data-i18n="scienceHeader">The Science</h2>

                <details class="context-section science-card" data-section="neuroscience">
                    <summary class="context-header">
                        <span class="context-icon">üß†</span>
                        <span class="context-title" data-i18n="neuroscienceTitle">Neuroscience</span>
                        <span class="confidence-badge" id="neuroscienceConfidence"></span>
                        <span class="section-status" data-section="neuroscience"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="neuroscienceContent"></p>
                        <div class="card-sources" id="neuroscienceSources"></div>
                        <p class="card-disclaimer" id="neuroscienceDisclaimer"></p>
                        <div class="section-complete">
                            <label class="complete-checkbox">
                                <input type="checkbox" class="section-check" data-section="neuroscience">
                                <span class="checkbox-custom"></span>
                                <span data-i18n="markComplete">I've read this section</span>
                            </label>
                        </div>
                    </div>
                </details>

                <details class="context-section science-card" data-section="behavioral">
                    <summary class="context-header">
                        <span class="context-icon">üî¨</span>
                        <span class="context-title" data-i18n="behavioralTitle">Behavioral Science</span>
                        <span class="confidence-badge" id="behavioralConfidence"></span>
                        <span class="section-status" data-section="behavioral"></span>
                        <span class="expand-icon">‚ñ∏</span>
                    </summary>
                    <div class="context-content">
                        <p id="behavioralContent"></p>
                        <div class="card-sources" id="behavioralSources"></div>
                        <p class="card-disclaimer" id="behavioralDisclaimer"></p>
                        <div class="section-complete">
                            <label class="complete-checkbox">
                                <input type="checkbox" class="section-check" data-section="behavioral">
                                <span class="checkbox-custom"></span>
                                <span data-i18n="markComplete">I've read this section</span>
                            </label>
                        </div>
                    </div>
                </details>
            </section>

            <!-- Weekly Action Card (Huberman-style) -->
            <section class="nudge-section" data-section="nudge">
                <div class="nudge-card">
                    <div class="nudge-header">
                        <span class="nudge-icon">‚ö°</span>
                        <h3 data-i18n="nudgeTitle">This Week's Action</h3>
                        <span class="confidence-badge" id="nudgeConfidence"></span>
                    </div>
                    <p class="nudge-content" id="nudgeContent"></p>
                    <div class="card-sources" id="nudgeSources"></div>
                    <p class="card-disclaimer" id="nudgeDisclaimer"></p>

                    <!-- Section completion checkbox -->
                    <div class="section-complete">
                        <label class="complete-checkbox">
                            <input type="checkbox" class="section-check" data-section="nudge">
                            <span class="checkbox-custom"></span>
                            <span data-i18n="markComplete">I've read this section</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Prayer Section -->
            <section class="prayer-section" data-section="prayer">
                <div class="prayer-card">
                    <div class="prayer-header">
                        <span class="prayer-icon">üôè</span>
                        <h3 data-i18n="prayerTitle">Prayer</h3>
                    </div>
                    <p class="prayer-content" id="prayerContent"></p>

                    <div class="prayer-science">
                        <div class="prayer-science-header">
                            <span class="science-icon">üß†</span>
                            <h4 data-i18n="prayerScienceTitle">Why Prayer Matters (Science)</h4>
                        </div>
                        <p class="prayer-science-content" id="prayerScienceContent"></p>
                        <div class="card-sources" id="prayerSources"></div>
                    </div>

                    <!-- Section completion checkbox -->
                    <div class="section-complete">
                        <label class="complete-checkbox">
                            <input type="checkbox" class="section-check" data-section="prayer">
                            <span class="checkbox-custom"></span>
                            <span data-i18n="markComplete">I've read this section</span>
                        </label>
                    </div>
                </div>
            </section>

            <!-- Progress Completion Card -->
            <section class="completion-section" id="completionSection">
                <div class="completion-card">
                    <div class="completion-progress">
                        <div class="progress-ring">
                            <svg viewBox="0 0 100 100">
                                <circle class="progress-bg" cx="50" cy="50" r="45"/>
                                <circle class="progress-fill" cx="50" cy="50" r="45" id="progressRing"/>
                            </svg>
                            <span class="progress-text" id="progressText">0/10</span>
                        </div>
                        <div class="progress-info">
                            <h3 data-i18n="progressTitle">Your Progress</h3>
                            <p class="progress-status" id="progressStatus" data-i18n="progressIncomplete">Complete all sections to finish this verse</p>
                        </div>
                    </div>
                    <div class="completion-badge" id="completionBadge" style="display: none;">
                        <span class="badge-icon">üèÜ</span>
                        <span data-i18n="verseComplete">Verse Complete!</span>
                    </div>
                </div>
            </section>
        </main>

        <footer class="app-footer">
            <div class="depth-indicator" id="depthIndicator">
                <div class="depth-info">
                    <span class="depth-label" id="depthLabel">Seeker</span>
                    <span class="depth-days" id="depthDays">Day 1 of 7</span>
                </div>
                <div class="depth-progress">
                    <div class="depth-fill" id="depthFill" style="width: 0%"></div>
                </div>
            </div>

            <!-- Subscribe CTA -->
            <div class="subscribe-cta">
                <button class="subscribe-btn" id="subscribeBtn">
                    <span class="subscribe-icon">üì¨</span>
                    <span data-i18n="subscribeCta">Get Your Weekly Verse</span>
                </button>
                <p class="cta-hint" data-i18n="ctaHint">Every Monday ‚Ä¢ Email or WhatsApp ‚Ä¢ Free forever</p>
            </div>

            <p class="footer-text" data-i18n="footerText">A new verse every day to guide your path</p>
        </footer>
    </div>

    <!-- History Modal -->
    <div class="modal-overlay" id="historyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 data-i18n="historyTitle">Previously Viewed Verses</h2>
                <button class="modal-close" id="closeHistory" aria-label="Close">√ó</button>
            </div>
            <div class="modal-body">
                <ul class="history-list" id="historyList"></ul>
                <p class="history-empty" id="historyEmpty" data-i18n="historyEmpty">No verses viewed yet. Check back tomorrow!</p>
            </div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div class="modal-overlay" id="registerModal">
        <div class="modal-content register-modal">
            <div class="modal-header register-modal-header">
                <h2 data-i18n="registerModalTitle">Get Your Weekly Verse</h2>
                <button class="modal-close" id="closeRegister" aria-label="Close">√ó</button>
            </div>
            <div class="modal-body">
                <p class="register-modal-desc" data-i18n="registerModalDesc">
                    Every Monday, receive one verse with full context, neuroscience insights, and a clear actionable practice for the week.
                </p>

                <form id="registerForm" class="register-form">
                    <!-- Email -->
                    <div class="form-group">
                        <label for="emailInput" data-i18n="emailLabel">Email Address</label>
                        <input
                            type="email"
                            id="emailInput"
                            class="email-input"
                            placeholder="you@example.com"
                            required
                            autocomplete="email"
                        >
                    </div>

                    <!-- Phone -->
                    <div class="form-group">
                        <label for="phoneInput" data-i18n="phoneLabel">Phone Number (for WhatsApp)</label>
                        <div class="phone-input-wrapper">
                            <span class="phone-prefix">+</span>
                            <input
                                type="tel"
                                id="phoneInput"
                                class="phone-input"
                                placeholder="1 234 567 8900"
                                autocomplete="tel"
                            >
                        </div>
                        <small class="form-hint" data-i18n="phoneHint">Optional - Include country code</small>
                    </div>

                    <!-- Language -->
                    <div class="form-group">
                        <label for="langSelect" data-i18n="langLabel">Language</label>
                        <select id="langSelect" class="form-select">
                            <option value="en">English</option>
                            <option value="es">Espa√±ol</option>
                        </select>
                    </div>

                    <!-- Bible Version (English only) -->
                    <div class="form-group" id="versionGroup">
                        <label for="versionSelect" data-i18n="versionLabel">Bible Version</label>
                        <select id="versionSelect" class="form-select">
                            <option value="KJV">King James Version (KJV)</option>
                            <option value="ESV">English Standard Version (ESV)</option>
                        </select>
                        <small class="form-hint" data-i18n="versionHint">Spanish uses RVR 1960</small>
                    </div>

                    <!-- Delivery Method -->
                    <div class="form-group">
                        <label data-i18n="deliveryLabel">Delivery Method</label>
                        <div class="delivery-options">
                            <label class="delivery-option">
                                <input type="checkbox" id="deliveryEmail" checked>
                                <span class="option-icon">üìß</span>
                                <span>Email</span>
                            </label>
                            <label class="delivery-option">
                                <input type="checkbox" id="deliveryWhatsApp">
                                <span class="option-icon">üí¨</span>
                                <span>WhatsApp</span>
                            </label>
                        </div>
                        <small class="form-hint" data-i18n="deliveryHint">Choose at least one</small>
                    </div>

                    <button type="submit" class="register-submit-btn" id="registerSubmit">
                        <span class="btn-text" data-i18n="registerBtn">Start My Weekly Verse</span>
                        <span class="btn-loading" style="display: none;">
                            <span class="spinner"></span>
                        </span>
                    </button>
                </form>

                <div class="register-success" id="registerSuccess" style="display: none;">
                    <div class="success-icon">‚úì</div>
                    <h3 data-i18n="registerSuccessTitle">You're all set!</h3>
                    <p data-i18n="registerSuccessMsg">Your first verse arrives Monday morning. Check your email to confirm.</p>
                </div>

                <div class="register-error" id="registerError" style="display: none;">
                    <p id="registerErrorMsg"></p>
                </div>

                <p class="register-privacy" data-i18n="registerPrivacy">
                    One email per week. No spam. Unsubscribe anytime.
                </p>
            </div>
        </div>
    </div>

    <script src="js/verses.js"></script>
    <script src="js/bibleBooks.js"></script>
    <script src="js/bibleService.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
